!function(e,a){var t,r=e.jQuery||e.Cowboy||(e.Cowboy={});r.throttle=t=function(e,t,o,d){function i(){function r(){l=+new Date,o.apply(n,f)}function i(){s=a}var n=this,c=+new Date-l,f=arguments;d&&!s&&r(),s&&clearTimeout(s),d===a&&c>e?r():!0!==t&&(s=setTimeout(d?i:r,d===a?e-c:e))}var s,l=0;return"boolean"!=typeof t&&(d=o,o=t,t=a),r.guid&&(i.guid=o.guid=o.guid||r.guid++),i},r.debounce=function(e,r,o){return o===a?t(e,r,!1):t(e,o,!1!==r)}}(this),jQuery(document).ready(function(e){function a(a){if(""==a)var t=e(document).find("[data-pafe-woocommerce-checkout-form-id]");else var t=e(document).find('[data-pafe-woocommerce-checkout-form-id="'+a+'"]');t.length>0&&t.each(function(){var a=e(this).attr("data-pafe-woocommerce-checkout-form-id"),t=e(document).find("[data-pafe-form-builder-form-id="+a+"]"),r=[],o=new FormData,d=e(this);d.closest(".elementor-element");t.each(function(){if(void 0==e(this).data("pafe-form-builder-stripe")&&void 0==e(this).data("pafe-form-builder-html")){var t=e(this).closest(".elementor-field-type-checkbox.elementor-field-required");t.length>0&&t.find("input[type=checkbox]:checked").length,e(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html("");var o=e(this).attr("type"),d=e(this).attr("name"),i=e(this).closest("[data-pafe-form-builder-repeater-form-id]"),s="",l="",n="",c=-1,f=0;if(i.length>0){$repeaterParents=e(this).parents("[data-pafe-form-builder-repeater-form-id]"),l=i.data("pafe-form-builder-repeater-id"),$repeaterParents.each(function(){var t=e(this).data("pafe-form-builder-repeater-id"),r=e(document).find('[data-pafe-form-builder-repeater-form-id="'+a+'"][data-pafe-form-builder-repeater-id="'+t+'"]');repeaterParentIndex=e(this).index()-r.index(),s+=t+"|index"+repeaterParentIndex+"|"+d.replace("[]","").replace("form_fields[","").replace("]","")+","}),n=i.data("pafe-form-builder-repeater-label");var m=e(document).find('[data-pafe-form-builder-repeater-id="'+i.data("pafe-form-builder-repeater-id")+'"]');f=i.siblings('[data-pafe-form-builder-repeater-id="'+i.data("pafe-form-builder-repeater-id")+'"]').length+1,c=i.index()-m.index()}if(-1!==d.indexOf("[]")){var p=[];if("checkbox"==o)e(this).closest(".elementor-element").find('[name="'+d+'"]:checked').each(function(){p.push(e(this).val())});else if(null==(p=e(this).val()))var p=[];_="";for(var u="",h=[],b=0;b<p.length;b++){if(void 0!=e(this).data("pafe-form-builder-send-data-by-label")){var v=p[b];if("checkbox"==o){var g=e(this).closest(".elementor-element").find('[value="'+v+'"]');g.length>0&&(u+=g.data("pafe-form-builder-send-data-by-label")+",")}else{var g=e(this).find('[value="'+v+'"]');g.length>0&&(u+=g.html()+",")}}if(_+=p[b]+",",void 0!=e(this).attr("data-pafe-form-booking-item-options")){var v=p[b],g=e(this).closest(".elementor-element").find('[value="'+v+'"]');g.length>0&&h.push(g.attr("data-pafe-form-booking-item-options"))}}_=_.replace(/,(\s+)?$/,"")}else if("radio"==o||"checkbox"==o){if(void 0!=e(this).data("pafe-form-builder-send-data-by-label"))var u=e(this).closest(".elementor-element").find('[name="'+d+'"]:checked').data("pafe-form-builder-send-data-by-label");var _=e(this).closest(".elementor-element").find('[name="'+d+'"]:checked').val()}else if(void 0!=e(this).data("pafe-form-builder-calculated-fields"))var _=e(this).siblings(".pafe-calculated-fields-form").text();else{if(void 0!=e(this).data("pafe-form-builder-send-data-by-label")){var v=e(this).val().trim(),g=e(this).find('[value="'+v+'"]');g.length>0&&(u=g.html())}var _=e(this).val().trim()}if(void 0!=_){var y={};y.label=e(this).closest(".elementor-field-group").find(".elementor-field-label").html(),y.name=d.replace("[]","").replace("form_fields[","").replace("]",""),y.value=_,void 0!==h&&h.length>0&&(y.booking=h),""!=u&&(y.value_label=u),e(this).closest(".elementor-field-type-calculated_fields").length>0&&(y.calculation_results=e(this).val().trim()),e(this).closest(".elementor-widget").hasClass("pafe-form-builder-conditional-logic-hidden")||(y.repeater_id=s,y.repeater_id_one=l,y.repeater_label=n,y.repeater_index=c,y.repeater_length=f,r.push(y))}}}),o.append("action","pafe_ajax_form_builder_woocommerce_checkout"),o.append("fields",JSON.stringify(r)),o.append("form_id",e(this).attr("data-pafe-woocommerce-checkout-id")),void 0!=e(this).closest("[data-elementor-id]")?o.append("post_id",e(this).closest("[data-elementor-id]").attr("data-elementor-id")):o.append("post_id",e(this).attr("data-pafe-woocommerce-checkout-post-id")),o.append("product_id",e(this).attr("data-pafe-woocommerce-checkout-product-id")),e.ajax({url:e("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:o,processData:!1,contentType:!1,success:function(a){"1"==a.trim()&&(e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"))}})})}e(document).on("keyup change","[data-pafe-form-builder-form-id]",e.debounce(700,function(){a(e(this).attr("data-pafe-form-builder-form-id"))})),e(window).on("load",function(){a()}),e(document).on("click","[data-pafe-woocommerce-sales-funnels-add-to-cart]",function(a){a.preventDefault();var t=e(this);t.css("opacity","0.5"),t.find("[data-pafe-woocommerce-sales-funnels-add-to-cart-message]").remove();var r=e(this).attr("data-pafe-woocommerce-sales-funnels-add-to-cart"),o=JSON.parse(r);e.ajax({url:e("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:{action:"pafe_ajax_woocommerce_sales_funnels_add_to_cart",options:o},success:function(a){t.css("opacity","1"),1==JSON.parse(a).status?(t.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--success">'+o.message_success+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart")):(t.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--out-of-stock">'+o.message_out_of_stock+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"))}})})});